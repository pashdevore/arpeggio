<div class="form-group">
  <input type="hidden" name="user_id" value="<%= $('.wrapper').attr('data-user-id') %>">
  <input type="hidden" class="img_url" name="image_url" value="">
  <input type="hidden" class="thumb_url" name="thumbnail_url" value="">
  <input type="hidden" class="img_width" name="image_width" value="">
  <input type="hidden" class="img_height" name="image_height" value="">
  <label for="title">Title</label>
  <input type="text" name="title" class="form-control" id="title" value="<%=song.escape('title')%>" placeholder="Song Title">
</div>
<div class="form-group">
  <label for="description">Description</label>
  <textarea class="form-control" name="description" rows="3" id="description" placeholder="Description"><%=song.escape('description')%></textarea>
</div>
<div class="form-group">
  <a href="#" id="upload_widget_opener">Upload Image</a>
</div>

<div class="form-group">
  <label for="song-upload">Choose File</label>
  <input type="file" id="song-upload" name="track">
</div>

<button type="submit" class="btn btn-default">Submit</button>

<!--Script for Cloudinary Photo Uploading -->
<script src="//widget.cloudinary.com/global/all.js" type="text/javascript"></script>

<script type="text/javascript">
document.getElementById("upload_widget_opener").addEventListener("click", function() {

  cloudinary.openUploadWidget({ cloud_name: 'arpeggio', upload_preset: 'wnoych6m'},
  function(error, result) {
    if (error) {
      console.log("Something went wrong...");
    } else {
      //Success!!!
      console.log(result);
      $(".img_url").attr('value', result[0].url);
      $(".thumb_url").attr('value', result[0].thumbnail_url);
      $(".img_height").attr('value', result[0].height);
      $(".img_width").attr('value', result[0].width);
    }
  });
}, false);
</script>
